<!DOCTYPE html>
<html>
    <head>
        <title>Weather Details.signIn</title>
        <link rel="stylesheet" href="SignIn.Css">
    </head>
    <body>
        <div class="form">
            <b>Username<input type="text" id="Username"><br>
            Password<input type="password" id="Password"><br></b>
            <button onclick="login()">Login</button>
            <p>Don't have an account? <a href="SignUp.html">Sign Up</a></p>
        </div> 
        <script>
            async function login(){
            const username=document.getElementById("Username").value;
            const password=document.getElementById("Password").value;

            const response=await fetch("http://127.0.0.1:8000/Signin",{
                method:"POST",
                headers:{
                    "Content-Type":"application/json"
                },
                body:JSON.stringify({
                    UserName:username,
                    Password:password
                })
            });
            const res=await response.json();
            console.log(res);
            const token=res.AccessToken;
            console.log(token);
            localStorage.setItem("token",token);
            // document.cookie = "token=" + token + "; path=/";
            
            alert(res.Message);
            
            if (response.status==200) {
                window.location.href = "D:/Programming/JWT/Task2/IndexWeatherAPI.html";
            }
        }
        </script>
    </body>
</html>

